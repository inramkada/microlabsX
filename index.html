<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">

<style>
  html, body{
    margin:0;
    width:100%;
    height:100%;
    background:#000;
    font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    color:#fff;
    overflow-x:hidden;
  }

  /* Hide scrollbar (max stealth) */
  html, body { scrollbar-width: none; -ms-overflow-style: none; }
  ::-webkit-scrollbar { width: 0; height: 0; }
  ::-webkit-scrollbar-thumb { background: transparent; }

  /* ===== BACKGROUND VIDEO ===== */
  #bg{
    position:fixed;
    inset:0;
    width:100vw;
    height:100vh;
    object-fit:cover;
    z-index:1;
    pointer-events:none;
  }

  /* ===== TOPBAR (RGB fusion) ===== */
  .topbar{
    position:fixed;
    top:18px;
    right:18px;
    z-index:20;
    display:flex;
    align-items:center;
    gap:58px;
    white-space:nowrap;
    pointer-events:auto;
    mix-blend-mode:difference;
  }

  .about,
  .nodes{
    font-size:22px;
    font-weight:700;
    text-transform:uppercase;
    letter-spacing:0.22em;
    user-select:none;
    -webkit-user-select:none;
  }

  .about{
    letter-spacing:0.18em;
    color:rgba(255,255,255,0.75);
    cursor:pointer;
    transition: color .18s ease, filter .18s ease, transform .18s ease;
  }
  .about:hover{
    color:rgba(255,255,255,0.92);
    filter:saturate(1.06);
    transform: translateY(-1px);
  }

  .nodes{
    position:relative;
    color:rgba(255,255,255,0.92);
    cursor:default;
  }

  /* ===== NODES DROPDOWN ===== */
  .nodes-stack{
    position:absolute;
    top: calc(100% + 18px);
    left: 50%;
    transform: translateX(-50%) translateY(-6px);
    display:grid;
    row-gap:22px;
    justify-items:center;
    align-items:center;
    width:max-content;
    min-width:11.5ch;

    opacity:0;
    pointer-events:none;
    transition: opacity .28s ease, transform .28s ease;
  }

  /* ✅ Invisible bridge to prevent hover “drop” */
  .nodes-bridge{
    position:absolute;
    left:-26px;
    right:-26px;
    top:100%;
    height:26px; /* covers the gap */
    background:transparent;
  }

  .nodes:hover .nodes-stack,
  .nodes.is-open .nodes-stack{
    opacity:1;
    pointer-events:auto;
    transform: translateX(-50%) translateY(0);
  }

  .node{
    width:11.5ch;
    text-align:center;
    font-size:40px;
    font-weight:700;
    letter-spacing:0.04em;
    font-variant-numeric: tabular-nums;
    color: rgba(255,255,255,0.92);
    mix-blend-mode:difference;

    opacity:0;
    transform: translateY(-6px) scale(.97);
    transition: opacity .3s ease, transform .18s cubic-bezier(.22,.61,.36,1);
    position:relative;
    cursor:pointer;
  }

  .nodes:hover .node,
  .nodes.is-open .node{
    opacity:1;
    transform: translateY(0) scale(1);
  }

  .node::after{
    content:"";
    position:absolute;
    left:50%;
    bottom:-12px;
    width:0;
    height:2px;
    transform: translateX(-50%);
    background: rgba(255,255,255,0.92);
    opacity:0;
    transition: width .18s ease, opacity .18s ease;
  }
  .node:hover::after{
    width:66%;
    opacity:.82;
  }

  /* ===== PAGE ===== */
  .page{
    position:relative;
    z-index:2;
  }

  /* ===== ABOUT SECTION (IN PAGE) ===== */
  .about-section{
    background:#000;
    padding:140px 0 160px;
    margin-top:100vh; /* empieza después del hero vídeo */
    border-top:1px solid rgba(255,255,255,0.06);
  }

  .about-wrap{
    width:min(1180px, calc(100vw - 56px));
    margin:0 auto;
  }

  .about-grid{
    display:grid;
    grid-template-columns: 1.05fr 0.95fr; /* ajuste premium */
    gap:46px;
    align-items:start;
  }

  .about-media{
    position:sticky;
    top:96px;
    height:min(58vh,500px);
    border-radius:26px;
    overflow:hidden;
    border:1px solid rgba(255,255,255,0.10);
    box-shadow:0 32px 140px rgba(0,0,0,0.72);
    background:#000;
  }

  .about-media video{
    width:100%;
    height:100%;
    object-fit:cover;
    transform:scale(1.02);
    filter:saturate(1.06) contrast(1.02);
  }

  .about-copy{
    padding-top:10px;
  }

  .about-kicker{
    font-size:12px;
    letter-spacing:0.18em;
    text-transform:uppercase;
    opacity:.6;
    margin:0 0 14px;
  }

  .about-title{
    margin:0 0 18px;
    font-size:28px;
    line-height:1.15;
    letter-spacing:0.06em;
    text-transform:uppercase;
    color:rgba(255,255,255,0.92);
  }

  .about-p{
    margin:0 0 18px;
    font-size:14px;
    line-height:1.65;
    opacity:.72;
    max-width:64ch;
  }

  .about-hr{
    height:1px;
    background:rgba(255,255,255,0.10);
    margin:22px 0;
  }

  .about-tags{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    margin-top:12px;
  }

  .about-tag{
    font-size:11px;
    letter-spacing:0.14em;
    text-transform:uppercase;
    padding:9px 12px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,0.16);
    background:rgba(255,255,255,0.03);
    opacity:.85;
  }

  .about-tag--btn{
    cursor:pointer;
    transition: transform .18s ease, opacity .18s ease, border-color .18s ease;
  }
  .about-tag--btn:hover{
    opacity:.95;
    transform: translateY(-1px);
    border-color: rgba(255,255,255,0.30);
  }
  .about-tag--btn:focus{
    outline:none;
    box-shadow: 0 0 0 2px rgba(255,255,255,0.14);
  }

  /* Scroll reveal */
  .reveal{
    opacity:0;
    transform: translateY(14px);
    transition: opacity .5s ease, transform .5s cubic-bezier(.22,.61,.36,1);
    will-change: opacity, transform;
  }
  .reveal.in{
    opacity:1;
    transform: translateY(0);
  }

  /* Footer */
  .footer{
    text-align:center;
    padding:80px 0 40px;
    font-size:11px;
    letter-spacing:0.14em;
    opacity:.45;
    mix-blend-mode:difference;
  }

  @media(max-width:980px){
    .about-grid{ grid-template-columns:1fr; }
    .about-media{
      position:relative;
      top:auto;
      height:44vh;
    }
  }

  /* =========================
     HORIZONTAL OVERLAY RAIL
  ========================== */
  .rail{
    position:fixed;
    inset:0;
    z-index:60;
    background:#000;
    opacity:0;
    pointer-events:none;
    transition: opacity .22s ease;
  }
  .rail.is-open{
    opacity:1;
    pointer-events:auto;
  }

  .rail-close{
    position:absolute;
    top:18px;
    right:18px;
    z-index:3;
    background:transparent;
    color:rgba(255,255,255,0.80);
    border:1px solid rgba(255,255,255,0.14);
    border-radius:999px;
    padding:10px 14px;
    font-size:12px;
    letter-spacing:0.14em;
    text-transform:uppercase;
    cursor:pointer;
    mix-blend-mode:difference;
  }
  .rail-close:hover{ color:rgba(255,255,255,0.95); border-color:rgba(255,255,255,0.28); }

  .rail-track{
    position:absolute;
    inset:0;
    display:flex;
    overflow-x:auto;
    overflow-y:hidden;
    scroll-snap-type:x mandatory;
    scroll-behavior:smooth;
  }

  .rail-panel{
    min-width:100vw;
    height:100vh;
    scroll-snap-align:start;
    display:block;
  }

  .panel-inner{
    width:min(1100px, calc(100vw - 56px));
    margin:0 auto;
    padding:120px 0 70px;
  }

  .panel-kicker{
    font-size:12px;
    letter-spacing:0.18em;
    text-transform:uppercase;
    opacity:.6;
    margin:0 0 14px;
  }

  .panel-title{
    margin:0 0 18px;
    font-size:28px;
    line-height:1.15;
    letter-spacing:0.06em;
    text-transform:uppercase;
    color:rgba(255,255,255,0.92);
  }

  .panel-p{
    margin:0 0 18px;
    font-size:14px;
    line-height:1.65;
    opacity:.72;
    max-width:72ch;
  }

  .panel-hr{
    height:1px;
    background:rgba(255,255,255,0.10);
    margin:22px 0;
  }

  /* Simple institutional form */
  .form{
    margin-top:22px;
    display:grid;
    gap:12px;
    max-width:680px;
  }
  .field{
    display:grid;
    gap:8px;
  }
  .label{
    font-size:11px;
    letter-spacing:0.14em;
    text-transform:uppercase;
    opacity:.62;
  }
  input, textarea{
    background:rgba(255,255,255,0.03);
    border:1px solid rgba(255,255,255,0.12);
    border-radius:14px;
    color:rgba(255,255,255,0.92);
    padding:12px 14px;
    font-size:14px;
    outline:none;
  }
  textarea{ min-height:140px; resize:vertical; }
  input:focus, textarea:focus{
    border-color: rgba(255,255,255,0.28);
    box-shadow: 0 0 0 2px rgba(255,255,255,0.10);
  }

  .form-actions{
    display:flex;
    gap:10px;
    margin-top:6px;
    flex-wrap:wrap;
  }

  .btn{
    appearance:none;
    border:none;
    cursor:pointer;
    font-size:11px;
    letter-spacing:0.14em;
    text-transform:uppercase;
    padding:12px 14px;
    border-radius:999px;
    background:rgba(255,255,255,0.08);
    color:rgba(255,255,255,0.90);
    border:1px solid rgba(255,255,255,0.12);
  }
  .btn:hover{
    background:rgba(255,255,255,0.11);
    border-color: rgba(255,255,255,0.22);
  }

  .btn-ghost{
    background:transparent;
  }
</style>
</head>

<body>

<!-- BACKGROUND VIDEO -->
<video id="bg" autoplay muted loop playsinline preload="metadata">
  <source src="CT.mp4" type="video/mp4">
</video>

<!-- TOPBAR -->
<div class="topbar">
  <div class="about" id="aboutBtn">ABOUT</div>

  <div class="nodes" id="nodesBtn" tabindex="0" role="button" aria-label="Nodes">
    NODES
    <div class="nodes-bridge" aria-hidden="true"></div>
    <div class="nodes-stack" aria-hidden="true">
      <div class="node" data-node="001">001</div>
      <div class="node" data-node="002">002</div>
      <div class="node" data-node="003">003</div>
    </div>
  </div>
</div>

<div class="page">

  <!-- ABOUT SECTION -->
  <section id="aboutSection" class="about-section">
    <div class="about-wrap">
      <div class="about-grid">

        <div class="about-media reveal">
          <video autoplay muted loop playsinline preload="metadata">
            <source src="CT.mp4" type="video/mp4">
          </video>
        </div>

        <div class="about-copy">
          <div class="about-kicker reveal">SOLUTIONS</div>

          <h2 class="about-title reveal">
            A GLOBAL, SCALABLE SYSTEM FOR THE NEXT INDUSTRIAL ERA.
          </h2>

          <p class="about-p reveal">
            Our objective is to provide governments with a globally deployable and scalable solution based on advanced automation and controlled biotechnology infrastructure.
          </p>

          <div class="about-hr reveal"></div>

          <p class="about-p reveal">
            The system is designed to transform physical space into fully automated operational environments,
            aligned with the emerging industrial paradigm where software, robotics, and data orchestration redefine production.
          </p>

          <p class="about-p reveal">
            By prioritizing automation as a foundational layer, our approach supports efficiency, resilience, and long-term sovereignty across public and institutional deployments.
          </p>

          <div class="about-tags reveal">
            <span class="about-tag about-tag--btn" role="button" tabindex="0" data-rail="who">CEO</span>
            <span class="about-tag about-tag--btn" role="button" tabindex="0" data-rail="government">INVESTORS &amp; GOVERNMENTS</span>
          </div>
        </div>

      </div>
    </div>
  </section>

  <div class="footer">
    © 2023–2025 MICRORETAILX LLC · MICROLABSX IS A PROJECT DESIGNATION
  </div>

</div>

<!-- =========================
     OVERLAY: HORIZONTAL RAIL
========================== -->
<div id="rail" class="rail" aria-hidden="true">
  <button class="rail-close" id="railClose" aria-label="Close">CLOSE</button>

  <div class="rail-track" id="railTrack">
    <!-- Panel 1: WHO WE ARE -->
    <section class="rail-panel" data-panel="who">
      <div class="panel-inner">
        <div class="panel-kicker">WHO WE ARE</div>
        <h2 class="panel-title">A LAB-DRIVEN SYSTEMS ORGANIZATION.</h2>

        <p class="panel-p">
          We build scalable automation-first infrastructure for controlled biotech operations—designed as a global system, deployable across jurisdictions and institutional environments.
        </p>

        <div class="panel-hr"></div>

        <p class="panel-p">
          Our focus is the next industrial shift: where robotics, software orchestration, and measurable execution redefine how production environments are created, replicated, and operated.
        </p>

        <p class="panel-p">
          We collaborate selectively with public institutions, industrial partners, and long-horizon capital under strict standards of governance, auditability, and operational clarity.
        </p>

        <div class="form-actions">
          <button class="btn" type="button" data-rail="government">GO TO GOVERNMENT CONTACT</button>
          <button class="btn btn-ghost" type="button" id="railBackToSite">BACK TO SITE</button>
        </div>
      </div>
    </section>

    <!-- Panel 2: GOVERNMENT CONTACT -->
    <section class="rail-panel" data-panel="government">
      <div class="panel-inner">
        <div class="panel-kicker">GOVERNMENT</div>
        <h2 class="panel-title">INSTITUTIONAL CONTACT.</h2>

        <p class="panel-p">
          Use this channel for public-sector discussions: deployment frameworks, pilot environments, regulatory alignment, or institutional collaboration models.
        </p>

        <div class="panel-hr"></div>

        <form class="form" id="govForm">
          <div class="field">
            <div class="label">ORGANIZATION</div>
            <input type="text" name="org" autocomplete="organization" placeholder="Agency / Ministry / Institution" required>
          </div>

          <div class="field">
            <div class="label">CONTACT NAME</div>
            <input type="text" name="name" autocomplete="name" placeholder="Full name" required>
          </div>

          <div class="field">
            <div class="label">EMAIL</div>
            <input type="email" name="email" autocomplete="email" placeholder="name@institution.gov" required>
          </div>

          <div class="field">
            <div class="label">MESSAGE</div>
            <textarea name="message" placeholder="Brief context, objectives, jurisdiction, and timeline." required></textarea>
          </div>

          <div class="form-actions">
            <button class="btn" type="submit">SEND EMAIL</button>
            <button class="btn btn-ghost" type="button" data-rail="who">WHO WE ARE</button>
          </div>

          <p class="panel-p" style="opacity:.55;margin-top:14px;">
            This form opens your email client (mailto) and does not store submissions on the website.
          </p>
        </form>
      </div>
    </section>
  </div>
</div>

<script>
  // ABOUT button -> smooth scroll
  document.getElementById("aboutBtn").addEventListener("click", () => {
    document.getElementById("aboutSection").scrollIntoView({ behavior:"smooth", block:"start" });
  });

  // Reveal on scroll
  const io = new IntersectionObserver((entries) => {
    for (const e of entries) {
      if (e.isIntersecting) e.target.classList.add("in");
    }
  }, { threshold: 0.15 });

  document.querySelectorAll(".reveal").forEach(el => io.observe(el));

  // NODES: enable click toggle for touch devices
  const nodesBtn = document.getElementById("nodesBtn");
  const isCoarse = window.matchMedia("(pointer: coarse)").matches;

  if (isCoarse) {
    nodesBtn.style.cursor = "pointer";
    nodesBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      nodesBtn.classList.toggle("is-open");
    });

    document.addEventListener("click", () => {
      nodesBtn.classList.remove("is-open");
    });
  }

  // Optional: node clicks (you can wire these to actions later)
  document.querySelectorAll(".node").forEach(n => {
    n.addEventListener("click", (e) => {
      // placeholder
      // console.log("Node:", n.dataset.node);
      e.stopPropagation();
    });
  });

  // =========================
  // Horizontal overlay rail
  // =========================
  const rail = document.getElementById("rail");
  const railTrack = document.getElementById("railTrack");
  const railClose = document.getElementById("railClose");
  const backToSite = document.getElementById("railBackToSite");

  function openRail(panel){
    rail.classList.add("is-open");
    rail.setAttribute("aria-hidden", "false");

    // lock background scroll
    document.documentElement.style.overflow = "hidden";
    document.body.style.overflow = "hidden";

    // scroll to panel
    const idx = (panel === "government") ? 1 : 0;
    railTrack.scrollTo({ left: idx * window.innerWidth, behavior: "smooth" });
  }

  function closeRail(){
    rail.classList.remove("is-open");
    rail.setAttribute("aria-hidden", "true");

    document.documentElement.style.overflow = "";
    document.body.style.overflow = "";
  }

  // Click tags / buttons that open rail
  function bindRailTriggers(root=document){
    root.querySelectorAll("[data-rail]").forEach(el => {
      const panel = el.getAttribute("data-rail");
      const activate = () => openRail(panel);

      el.addEventListener("click", activate);
      el.addEventListener("keydown", (e) => {
        if (e.key === "Enter" || e.key === " ") { e.preventDefault(); activate(); }
      });
    });
  }
  bindRailTriggers();

  railClose.addEventListener("click", closeRail);
  if (backToSite) backToSite.addEventListener("click", closeRail);

  document.addEventListener("keydown", (e) => {
    if (e.key === "Escape" && rail.classList.contains("is-open")) closeRail();
  });

  // Close if click on empty black background (outside panels)
  rail.addEventListener("click", (e) => {
    if (e.target === rail) closeRail();
  });

  // Government form -> mailto (no backend)
  document.getElementById("govForm").addEventListener("submit", (e) => {
    e.preventDefault();
    const fd = new FormData(e.target);
    const org = (fd.get("org") || "").toString().trim();
    const name = (fd.get("name") || "").toString().trim();
    const email = (fd.get("email") || "").toString().trim();
    const msg = (fd.get("message") || "").toString().trim();

    const to = "hello@microretailx.com"; // <-- cambia aquí tu email real
    const subject = encodeURIComponent(`[Government / Institutional] ${org}`);
    const body = encodeURIComponent(
      `Organization: ${org}\n` +
      `Contact: ${name}\n` +
      `Email: ${email}\n\n` +
      `Message:\n${msg}\n`
    );

    window.location.href = `mailto:${to}?subject=${subject}&body=${body}`;
  });
</script>

</body>
</html>
