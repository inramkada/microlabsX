<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>microlabsX</title>

<style>
  html, body{
    margin:0; height:100%;
    background:#000; color:#fff;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    overflow-x:hidden;
  }
  html,body{scrollbar-width:none;-ms-overflow-style:none}
  ::-webkit-scrollbar{width:0;height:0}

  /* Background video */
  #bg{
    position:fixed; inset:0;
    width:100vw; height:100vh;
    object-fit:cover;
    z-index:1;
    pointer-events:none;
  }

  /* Topbar */
  .topbar{
    position:fixed;
    top:18px; right:18px;
    z-index:9999;
    display:flex;
    align-items:center;
    gap:18px;
    mix-blend-mode:difference;
    user-select:none;
    -webkit-user-select:none;
  }

  .toplink{
    font-size:22px;
    font-weight:700;
    letter-spacing:.22em;
    text-transform:uppercase;
    white-space:nowrap;
    cursor:pointer;
    color:rgba(255,255,255,.92);
  }
  .toplink.muted{ color:rgba(255,255,255,.72); }

  /* Nodes dropdown */
  .nodes{ position:relative; cursor:default; }
  .nodes-bridge{
    position:absolute; top:100%;
    left:-30px; right:-30px;
    height:28px;
    background:transparent;
    pointer-events:auto;
  }
  .nodes-stack{
    position:absolute;
    top:calc(100% + 18px);
    left:50%;
    transform:translateX(-50%);
    display:grid;
    gap:22px;
    opacity:0;
    pointer-events:none;
    z-index:99999;
  }
  .nodes:hover .nodes-stack{
    opacity:1;
    pointer-events:auto;
  }
  .node{
    width:11.5ch;
    text-align:center;
    font-size:40px;
    font-weight:700;
    letter-spacing:.04em;
    opacity:.92;
    cursor:pointer;
    position:relative;
  }
  .node::after{
    content:"";
    position:absolute;
    left:50%;
    bottom:-12px;
    width:0;
    height:2px;
    transform:translateX(-50%);
    background: rgba(255,255,255,.9);
    opacity:.85;
  }
  .node:hover::after{ width:66%; }

  /* Footer fixed in index (clickable link) */
  .index-footer{
    position:fixed;
    left:0; right:0;
    bottom:18px;
    z-index:9998;
    text-align:center;
    font-size:11px;
    letter-spacing:.14em;
    text-transform:uppercase;
    opacity:.60;
    mix-blend-mode:difference;
    padding:0 18px;

    pointer-events:auto;              /* link clickable */
    user-select:none;
    -webkit-user-select:none;
  }
  .index-footer a{
    color:rgba(255,255,255,.92);
    text-decoration:none;
    border-bottom:1px solid rgba(255,255,255,.28);
    padding-bottom:2px;
  }
  .index-footer a:hover{
    border-bottom-color:rgba(255,255,255,.75);
  }

  /* ===== ABOUT overlay ===== */
  .about-overlay{
    position:fixed;
    inset:0;
    z-index:2000;
    display:none;
    pointer-events:none;
  }
  .about-overlay.is-open{
    display:block;
    pointer-events:auto;
  }
  .about-dim{
    position:absolute;
    inset:0;
    background:rgba(0,0,0,.50);
  }
  .about-stage{
    position:absolute;
    inset:0;
    display:grid;
    place-items:center;
    padding:min(6vh, 48px) 0;
  }
  .about-shell{
    position:relative;
    width:100vw;
    background:#000;
    overflow:hidden;
  }
  .about-close{
    position:absolute;
    top:18px; right:18px;
    border:1px solid rgba(255,255,255,.14);
    background:rgba(255,255,255,.04);
    border-radius:999px;
    padding:10px 14px;
    font-size:12px;
    letter-spacing:.14em;
    text-transform:uppercase;
    color:rgba(255,255,255,.86);
    cursor:pointer;
    z-index:6;
  }
  .edge-arrow{
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    width:56px;
    height:120px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.14);
    background:rgba(255,255,255,.04);
    display:grid;
    place-items:center;
    cursor:pointer;
    opacity:0;
    pointer-events:none;
    z-index:7;
    user-select:none;
    -webkit-user-select:none;
  }
  .edge-arrow.left{ left:18px; }
  .edge-arrow.right{ right:18px; }
  .edge-arrow svg{ width:22px; height:22px; opacity:.9; }
  .about-shell.is-hot .edge-arrow{ opacity:.9; pointer-events:auto; }
  .edge-arrow.is-disabled{ opacity:.18 !important; pointer-events:none !important; }

  .about-index{
    position:absolute;
    left:24px;
    bottom:18px;
    font-size:11px;
    letter-spacing:.14em;
    text-transform:uppercase;
    opacity:.55;
    pointer-events:none;
    z-index:6;
  }

  .about-track{
    display:flex;
    overflow:hidden;
    scroll-snap-type:x mandatory;
    scroll-behavior:smooth;
    touch-action: pan-x;
  }
  .about-panel{
    min-width:100%;
    scroll-snap-align:start;
    padding:56px 0;
    box-sizing:border-box;
  }
  .about-inner{
    width:min(1180px, calc(100vw - 96px));
    margin:0 auto;
  }
  .about-grid{
    display:grid;
    grid-template-columns: 1.05fr .95fr;
    gap:48px;
    align-items:start;
  }
  .about-media{
    height:min(52vh, 520px);
    border-radius:26px;
    overflow:hidden;
    background:#000;
    border:1px solid rgba(255,255,255,.10);
  }
  .about-media video{ width:100%; height:100%; object-fit:cover; }

  .about-kicker{
    font-size:12px;
    letter-spacing:.18em;
    text-transform:uppercase;
    opacity:.6;
    margin:0 0 14px;
  }
  .about-title{
    margin:0 0 18px;
    font-size:28px;
    line-height:1.15;
    letter-spacing:.06em;
    text-transform:uppercase;
    color:rgba(255,255,255,.92);
  }
  .about-p{
    margin:0 0 18px;
    font-size:14px;
    line-height:1.65;
    opacity:.72;
    max-width:70ch;
  }
  .about-hr{
    height:1px;
    background:rgba(255,255,255,.10);
    margin:22px 0;
  }

  @media (max-width: 980px){
    .about-inner{ width:min(1180px, calc(100vw - 44px)); }
    .about-grid{ grid-template-columns:1fr; }
    .about-media{ height:44vh; }
    .edge-arrow{ opacity:.92; pointer-events:auto; height:92px; width:52px; }
    .about-shell.is-hot .edge-arrow{ opacity:.92; pointer-events:auto; }
  }

  /* ===== LANG globe (click-to-open) ===== */
  .lang{
    position:relative;
    display:flex;
    align-items:center;
    user-select:none;
    -webkit-user-select:none;
  }
  .lang-btn{
    display:flex;
    align-items:center;
    justify-content:center;
    width:28px;
    height:28px;
    border-radius:999px;
    cursor:pointer;
    color:rgba(255,255,255,.90);
  }
  .lang-btn svg{ width:18px; height:18px; opacity:.9; }

  /* Default (LTR): opens to the LEFT */
  .lang-row{
    position:absolute;
    right:100%;
    top:50%;
    transform:translateY(-50%) translateX(-14px);
    display:flex;
    align-items:center;
    gap:18px;
    opacity:0;
    pointer-events:none;
    white-space:nowrap;
  }
  .lang.is-open .lang-row{
    opacity:1;
    pointer-events:auto;
  }
  .lang-chip{
    font-size:15px;
    font-weight:700;
    letter-spacing:.22em;
    text-transform:uppercase;
    opacity:.72;
    cursor:pointer;
  }
  .lang-chip:hover{
    opacity:.95;
    text-decoration:underline;
    text-underline-offset:7px;
    text-decoration-thickness:2px;
  }

  /* ===== SOUND FAB (bigger + thicker strokes + RGB) ===== */
  .sound-fab{
    position:fixed;
    right:18px;
    bottom:18px;
    z-index:9999;

    display:flex;
    align-items:center;
    gap:14px;

    cursor:pointer;
    user-select:none;
    -webkit-user-select:none;

    mix-blend-mode:difference;
    color:rgba(255,255,255,.95);
    transform:translateZ(0);
    pointer-events:auto; /* safety */
  }
  .sound-ico{
    width:38px;
    height:38px;
    opacity:.98;
    transform-origin: 50% 50%;
  }
  .sound-off{ display:none; }
  .sound-fab.is-muted .sound-on{ display:none; }
  .sound-fab.is-muted .sound-off{ display:block; }

  .sound-label{
    font-size:12px;
    font-weight:700;
    letter-spacing:.22em;
    text-transform:uppercase;
    opacity:0;
    pointer-events:none;
    transform:translateX(8px);
    white-space:nowrap;
  }
  .sound-fab:hover .sound-label{
    opacity:.72;
    transform:translateX(0);
  }

  /* Micro pulse */
  .sound-fab.is-pulse .sound-ico{
    animation: soundPulse 120ms ease-out;
  }
  @keyframes soundPulse{
    0%{ transform: scale(1); }
    50%{ transform: scale(1.08); }
    100%{ transform: scale(1); }
  }

  /* RTL support (sound layout) */
  html[dir="rtl"] .sound-fab{ flex-direction:row-reverse; }
  html[dir="rtl"] .sound-label{ transform:translateX(-8px); }
  html[dir="rtl"] .sound-fab:hover .sound-label{ transform:translateX(0); }

  /* ===== RTL: topbar order + LANG opens RIGHT + globe mirrored + language order flipped ===== */
  html[dir="rtl"] .topbar{ flex-direction: row-reverse; }

  html[dir="rtl"] .lang-row{
    right:auto;
    left:100%;
    transform:translateY(-50%) translateX(14px);
    flex-direction: row-reverse; /* flip visual order in Arabic */
  }

  html[dir="rtl"] .lang-btn svg{ transform: scaleX(-1); }

  /* Anti-save best-effort */
  body{
    -webkit-user-select:none;
    -moz-user-select:none;
    -ms-user-select:none;
    user-select:none;
  }
</style>
</head>

<body>

<video id="bg" autoplay muted loop playsinline preload="metadata">
  <source src="CT.mp4" type="video/mp4">
</video>

<div class="topbar">
  <!-- LANG (globe) FIRST -->
  <div class="lang" id="langWrap" aria-label="Language">
    <div class="lang-btn" id="langBtn" title="Language" role="button" tabindex="0" aria-haspopup="true" aria-expanded="false">
      <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <path d="M12 22a10 10 0 1 0 0-20 10 10 0 0 0 0 20Z" stroke="currentColor" stroke-width="1.9"/>
        <path d="M2.5 12h19" stroke="currentColor" stroke-width="1.9" stroke-linecap="round"/>
        <path d="M12 2c2.8 2.8 2.8 16.2 0 20" stroke="currentColor" stroke-width="1.9" stroke-linecap="round"/>
        <path d="M12 2c-2.8 2.8-2.8 16.2 0 20" stroke="currentColor" stroke-width="1.9" stroke-linecap="round" opacity=".85"/>
      </svg>
    </div>

    <div class="lang-row" aria-hidden="true">
      <span class="lang-chip" data-lang="en">EN</span>
      <span class="lang-chip" data-lang="es">ES</span>
      <span class="lang-chip" data-lang="ca">CA</span>
      <span class="lang-chip" data-lang="ar">AR</span>
      <span class="lang-chip" data-lang="zh">ZH</span>
      <span class="lang-chip" data-lang="ru">RU</span>
    </div>
  </div>

  <!-- ABOUT -->
  <div class="toplink muted" id="aboutBtn" data-i18n="top_about">ABOUT</div>

  <!-- NODES -->
  <div class="toplink nodes"><span data-i18n="top_nodes">NODES</span>
    <div class="nodes-bridge" aria-hidden="true"></div>
    <div class="nodes-stack" aria-hidden="true">
      <div class="node" data-node="001">001</div>
      <div class="node" data-node="002">002</div>
      <div class="node" data-node="003">003</div>
    </div>
  </div>
</div>

<div class="index-footer" data-i18n="footer_html">
  <a href="https://www.microstudioX.com" target="_blank" rel="noopener">MICRORETAILX LLC</a>
  · MICROSTUDIOX IS A PROJECT UNDER DEVELOPMENT. NO COMMERCIAL ACTIVITY.
</div>

<!-- ABOUT overlay -->
<div class="about-overlay" id="aboutOverlay" aria-hidden="true">
  <div class="about-dim" id="aboutDim"></div>

  <div class="about-stage">
    <div class="about-shell" id="aboutShell" role="dialog" aria-modal="true" aria-label="About panels">
      <button class="about-close" id="aboutClose" type="button" data-i18n="ui_close">CLOSE</button>

      <div class="edge-arrow left" id="prevBtn" title="Previous">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M14.5 5L8 12l6.5 7" stroke="currentColor" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>

      <div class="edge-arrow right" id="nextBtn" title="Next">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M9.5 5L16 12l-6.5 7" stroke="currentColor" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>

      <div class="about-index" id="aboutIndex">01 / 03</div>

      <div class="about-track" id="aboutTrack">
        <!-- PANEL 1 -->
        <section class="about-panel" data-panel="about">
          <div class="about-inner">
            <div class="about-grid">
              <div class="about-media">
                <video autoplay muted loop playsinline preload="metadata">
                  <source src="CT.mp4" type="video/mp4">
                </video>
              </div>

              <div>
                <div class="about-kicker" data-i18n="about_kicker">ABOUT</div>
                <h2 class="about-title" data-i18n="about_title">A GLOBAL, SCALABLE SYSTEM FOR THE NEXT INDUSTRIAL ERA.</h2>

                <p class="about-p" data-i18n="about_p1">
                  Our objective is to provide governments with a globally deployable and scalable solution based on advanced automation and controlled biotechnology infrastructure.
                </p>

                <div class="about-hr"></div>

                <p class="about-p" data-i18n="about_p2">
                  The system is designed to transform physical space into fully automated operational environments,
                  aligned with the emerging industrial paradigm where software, robotics, and data orchestration redefine production.
                </p>

                <p class="about-p" data-i18n="about_p3">
                  By prioritizing automation as a foundational layer, our approach supports efficiency, resilience, and long-term sovereignty across public and institutional deployments.
                </p>
              </div>
            </div>
          </div>
        </section>

        <!-- PANEL 2 -->
        <section class="about-panel" data-panel="ceo">
          <div class="about-inner">
            <div class="about-kicker" data-i18n="ceo_kicker">microlabsX</div>
            <h2 class="about-title" data-i18n="ceo_title">WHO WE ARE</h2>

            <p class="about-p" data-i18n="ceo_p1">
              MicroretailX LLC is the legal entity behind this initiative. We develop automation-first systems for controlled, scalable biotech infrastructure across institutional environments.
            </p>

            <div class="about-hr"></div>

            <p class="about-p" data-i18n="ceo_p2">
              We focus on the structural layer of the next industrial shift: robotics, software orchestration,
              and measurable execution as a deployable operating system for space.
            </p>
          </div>
        </section>

        <!-- PANEL 3 -->
        <section class="about-panel" data-panel="gov">
          <div class="about-inner">
            <div class="about-kicker" data-i18n="gov_kicker">GOVERNMENTS</div>
            <h2 class="about-title" data-i18n="gov_title">INSTITUTIONAL DEPLOYMENT</h2>

            <p class="about-p" data-i18n="gov_p1">
              A globally deployable framework for public-sector and institutional partners:
              pilot environments, regulatory alignment, operational governance, and long-term resilience.
            </p>

            <div class="about-hr"></div>

            <p class="about-p" data-i18n="gov_p2">developing contact</p>
          </div>
        </section>
      </div>
    </div>
  </div>
</div>

<!-- SOUND FAB -->
<div class="sound-fab" id="soundFab" role="button" tabindex="0" aria-label="Sound toggle">
  <span class="sound-label" id="soundLabel">SOUND OFF</span>

  <!-- Speaker (ON) -->
  <svg class="sound-ico sound-on" viewBox="0 0 24 24" aria-hidden="true">
    <path d="M11 5.5L7.8 8H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h2.8L11 18.5a1 1 0 0 0 1.6-.8V6.3a1 1 0 0 0-1.6-.8Z"
          fill="none" stroke="currentColor" stroke-width="2.8" stroke-linejoin="round"/>
    <path d="M15 9.1c1.15.9 1.15.9 1.15 2.9s0 2-1.15 2.9"
          fill="none" stroke="currentColor" stroke-width="2.8" stroke-linecap="round"/>
    <path d="M17.5 7.2c1.9 1.65 1.9 1.65 1.9 4.8s0 3.15-1.9 4.8"
          fill="none" stroke="currentColor" stroke-width="2.8" stroke-linecap="round" opacity=".92"/>
  </svg>

  <!-- Speaker (MUTED) -->
  <svg class="sound-ico sound-off" viewBox="0 0 24 24" aria-hidden="true">
    <path d="M11 5.5L7.8 8H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h2.8L11 18.5a1 1 0 0 0 1.6-.8V6.3a1 1 0 0 0-1.6-.8Z"
          fill="none" stroke="currentColor" stroke-width="2.8" stroke-linejoin="round"/>
    <path d="M18.8 7.2L7.2 18.8"
          fill="none" stroke="currentColor" stroke-width="3.2" stroke-linecap="round"/>
  </svg>
</div>

<script>
  // ===== ABOUT overlay logic =====
  const aboutBtn = document.getElementById("aboutBtn");
  const aboutOverlay = document.getElementById("aboutOverlay");
  const aboutDim = document.getElementById("aboutDim");
  const aboutClose = document.getElementById("aboutClose");
  const aboutShell = document.getElementById("aboutShell");

  const track = document.getElementById("aboutTrack");
  const panels = Array.from(track.querySelectorAll(".about-panel"));
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");
  const indexEl = document.getElementById("aboutIndex");

  function w(){ return track.clientWidth || window.innerWidth; }
  function idx(){ return Math.round(track.scrollLeft / w()); }
  function clamp(n,min,max){ return Math.max(min, Math.min(max, n)); }

  function updateNav(){
    const i = idx();
    indexEl.textContent =
      String(i+1).padStart(2,"0") + " / " + String(panels.length).padStart(2,"0");
    prevBtn.classList.toggle("is-disabled", i === 0);
    nextBtn.classList.toggle("is-disabled", i === panels.length - 1);
  }

  function scrollToIndex(i){
    const target = clamp(i,0,panels.length-1) * w();
    track.scrollTo({ left: target, behavior:"smooth" });
    setTimeout(updateNav, 120);
  }

  function openAbout(panelKey){
    aboutOverlay.classList.add("is-open");
    aboutOverlay.setAttribute("aria-hidden","false");
    document.body.style.overflow = "hidden";

    let i = 0;
    if(panelKey){
      const found = panels.findIndex(p => p.dataset.panel === panelKey);
      i = found >= 0 ? found : 0;
    }
    scrollToIndex(i);
    updateNav();
  }

  function closeAbout(){
    aboutOverlay.classList.remove("is-open");
    aboutOverlay.setAttribute("aria-hidden","true");
    document.body.style.overflow = "";
    aboutShell.classList.remove("is-hot");
  }

  aboutBtn.addEventListener("click", ()=> openAbout("about"));
  aboutDim.addEventListener("click", closeAbout);
  aboutClose.addEventListener("click", closeAbout);

  document.addEventListener("keydown", (e)=>{
    if(!aboutOverlay.classList.contains("is-open")) return;
    if(e.key === "Escape") closeAbout();
    if(e.key === "ArrowLeft") scrollToIndex(idx() - 1);
    if(e.key === "ArrowRight") scrollToIndex(idx() + 1);
  });

  prevBtn.addEventListener("click", ()=> scrollToIndex(idx() - 1));
  nextBtn.addEventListener("click", ()=> scrollToIndex(idx() + 1));
  track.addEventListener("scroll", ()=> updateNav(), { passive:true });

  let hotT = null;
  function setHot(on){
    aboutShell.classList.toggle("is-hot", on);
    if(on){
      clearTimeout(hotT);
      hotT = setTimeout(()=> aboutShell.classList.remove("is-hot"), 1000);
    }
  }
  aboutShell.addEventListener("mousemove", (e)=>{
    const r = aboutShell.getBoundingClientRect();
    const x = e.clientX - r.left;
    const near = (x < 140) || (x > r.width - 140);
    if(near) setHot(true);
  });
  aboutShell.addEventListener("mouseleave", ()=> aboutShell.classList.remove("is-hot"));
  window.addEventListener("resize", ()=>{ scrollToIndex(idx()); updateNav(); });
  updateNav();

  // Nodes click placeholders
  document.querySelectorAll(".node").forEach(n=>{
    n.addEventListener("click", (e)=> e.stopPropagation());
  });

  // ===== I18N =====
  const SUPPORTED = ["en","es","ca","ar","zh","ru"];
  const I18N = {
    en:{ top_about:"ABOUT", top_nodes:"NODES", ui_close:"CLOSE",
      footer_html:`<a href="https://www.microstudioX.com" target="_blank" rel="noopener">MICRORETAILX LLC</a> · MICROSTUDIOX IS A PROJECT UNDER DEVELOPMENT. NO COMMERCIAL ACTIVITY.`,
      about_kicker:"ABOUT", about_title:"A GLOBAL, SCALABLE SYSTEM FOR THE NEXT INDUSTRIAL ERA.",
      about_p1:"Our objective is to provide governments with a globally deployable and scalable solution based on advanced automation and controlled biotechnology infrastructure.",
      about_p2:"The system is designed to transform physical space into fully automated operational environments, aligned with the emerging industrial paradigm where software, robotics, and data orchestration redefine production.",
      about_p3:"By prioritizing automation as a foundational layer, our approach supports efficiency, resilience, and long-term sovereignty across public and institutional deployments.",
      ceo_kicker:"microlabsX", ceo_title:"WHO WE ARE",
      ceo_p1:"MicroretailX LLC is the legal entity behind this initiative. We develop automation-first systems for controlled, scalable biotech infrastructure across institutional environments.",
      ceo_p2:"We focus on the structural layer of the next industrial shift: robotics, software orchestration, and measurable execution as a deployable operating system for space.",
      gov_kicker:"GOVERNMENTS", gov_title:"INSTITUTIONAL DEPLOYMENT",
      gov_p1:"A globally deployable framework for public-sector and institutional partners: pilot environments, regulatory alignment, operational governance, and long-term resilience.",
      gov_p2:"developing contact",
      top_sound_on_off:{on:"SOUND ON",off:"SOUND OFF"}
    },
    es:{ top_about:"ABOUT", top_nodes:"NODES", ui_close:"CERRAR",
      footer_html:`<a href="https://www.microstudioX.com" target="_blank" rel="noopener">MICRORETAILX LLC</a> · MICROSTUDIOX ES UN PROYECTO EN DESARROLLO. SIN ACTIVIDAD COMERCIAL.`,
      about_kicker:"ABOUT", about_title:"UN SISTEMA GLOBAL Y ESCALABLE PARA LA PRÓXIMA ERA INDUSTRIAL.",
      about_p1:"Nuestro objetivo es ofrecer a gobiernos una solución global, desplegable y escalable basada en automatización avanzada e infraestructura biotecnológica controlada.",
      about_p2:"El sistema transforma el espacio físico en entornos operativos totalmente automatizados, alineados con el nuevo paradigma industrial donde el software, la robótica y la orquestación de datos redefinen la producción.",
      about_p3:"Al priorizar la automatización como capa fundacional, nuestro enfoque impulsa eficiencia, resiliencia y soberanía operativa a largo plazo en despliegues públicos e institucionales.",
      ceo_kicker:"microlabsX", ceo_title:"QUIÉNES SOMOS",
      ceo_p1:"MicroretailX LLC es la entidad legal detrás de esta iniciativa. Desarrollamos sistemas con automatización como base para infraestructura biotecnológica controlada y escalable en entornos institucionales.",
      ceo_p2:"Nos centramos en la capa estructural del próximo cambio industrial: robótica, orquestación de software y ejecución medible como sistema operativo desplegable para el espacio.",
      gov_kicker:"GOBIERNOS", gov_title:"DESPLIEGUE INSTITUCIONAL",
      gov_p1:"Un marco globalmente desplegable para socios del sector público e institucional: entornos piloto, alineación regulatoria, gobernanza operativa y resiliencia a largo plazo.",
      gov_p2:"contacto en desarrollo",
      top_sound_on_off:{on:"SONIDO ON",off:"SONIDO OFF"}
    },
    ca:{ top_about:"ABOUT", top_nodes:"NODES", ui_close:"TANCAR",
      footer_html:`<a href="https://www.microstudioX.com" target="_blank" rel="noopener">MICRORETAILX LLC</a> · MICROSTUDIOX ÉS UN PROJECTE EN DESENVOLUPAMENT. SENSE ACTIVITAT COMERCIAL.`,
      about_kicker:"ABOUT", about_title:"UN SISTEMA GLOBAL I ESCALABLE PER A LA PROPERA ERA INDUSTRIAL.",
      about_p1:"El nostre objectiu és oferir als governs una solució global, desplegable i escalable basada en automatització avançada i infraestructura biotecnològica controlada.",
      about_p2:"El sistema transforma l’espai físic en entorns operatius totalment automatitzats, alineats amb el nou paradigma industrial on el programari, la robòtica i l’orquestració de dades redefineixen la producció.",
      about_p3:"En prioritzar l’automatització com a capa fonamental, el nostre enfocament impulsa eficiència, resiliència i sobirania operativa a llarg termini en desplegaments públics i institucionals.",
      ceo_kicker:"microlabsX", ceo_title:"QUI SOM",
      ceo_p1:"MicroretailX LLC és l’entitat legal darrere d’aquesta iniciativa. Desenvolupem sistemes amb automatització com a base per a infraestructura biotecnològica controlada i escalable en entorns institucionals.",
      ceo_p2:"Ens centrem en la capa estructural del proper canvi industrial: robòtica, orquestració de programari i execució mesurable com a sistema operatiu desplegable per a l’espai.",
      gov_kicker:"GOVERNS", gov_title:"DESPLEGAMENT INSTITUCIONAL",
      gov_p1:"Un marc desplegable globalment per a socis del sector públic i institucional: entorns pilot, alineació regulatòria, governança operativa i resiliència a llarg termini.",
      gov_p2:"contacte en desenvolupament",
      top_sound_on_off:{on:"SO ON",off:"SO OFF"}
    },
    ar:{ top_about:"نبذة", top_nodes:"عُقَد", ui_close:"إغلاق",
      footer_html:`<a href="https://www.microstudioX.com" target="_blank" rel="noopener">MICRORETAILX LLC</a> · MICROSTUDIOX مشروع قيد التطوير. لا نشاط تجاري.`,
      about_kicker:"نبذة", about_title:"نظام عالمي قابل للتوسع لعصر صناعي جديد.",
      about_p1:"هدفنا هو تزويد الحكومات بحل عالمي قابل للنشر والتوسع يعتمد على الأتمتة المتقدمة وبنية تحتية للتقنية الحيوية ضمن بيئات مُحكَمة.",
      about_p2:"يحوّل النظام المساحات الفيزيائية إلى بيئات تشغيل مؤتمتة بالكامل، منسجمة مع التحول الصناعي حيث يعيد البرمجيات والروبوتات وتنسيق البيانات تعريف الإنتاج.",
      about_p3:"من خلال جعل الأتمتة طبقة أساسية، يدعم نهجنا الكفاءة والمرونة والسيادة التشغيلية طويلة الأمد في التطبيقات العامة والمؤسسية.",
      ceo_kicker:"microlabsX", ceo_title:"من نحن",
      ceo_p1:"MicroretailX LLC هي الكيان القانوني وراء هذه المبادرة. نطوّر أنظمة «الأتمتة أولاً» لبنية تحتية للتقنية الحيوية محكومة وقابلة للتوسع ضمن بيئات مؤسسية.",
      ceo_p2:"نركّز على الطبقة البنيوية للتحول الصناعي القادم: الروبوتات، تنسيق البرمجيات، والتنفيذ القابل للقياس كنظام تشغيل قابل للنشر للمساحات.",
      gov_kicker:"الحكومات", gov_title:"النشر المؤسسي",
      gov_p1:"إطار عالمي قابل للنشر لشركاء القطاع العام والمؤسسات: بيئات تجريبية، مواءمة تنظيمية، حوكمة تشغيلية، ومرونة طويلة الأمد.",
      gov_p2:"جهة الاتصال قيد التطوير",
      top_sound_on_off:{on:"الصوت تشغيل",off:"الصوت إيقاف"}
    },
    zh:{ top_about:"关于", top_nodes:"节点", ui_close:"关闭",
      footer_html:`<a href="https://www.microstudioX.com" target="_blank" rel="noopener">MICRORETAILX LLC</a> · MICROSTUDIOX 项目开发中。无商业活动。`,
      about_kicker:"关于", about_title:"面向下一代工业时代的全球可扩展系统。",
      about_p1:"我们的目标是为政府提供可全球部署、可扩展的解决方案，基于先进自动化与受控生物技术基础设施。",
      about_p2:"该系统将物理空间转化为完全自动化的运营环境，契合新兴工业范式：软件、机器人与数据编排正在重塑生产。",
      about_p3:"以自动化为基础层，我们的方法支持效率、韧性与长期主权，适用于公共与机构级部署。",
      ceo_kicker:"microlabsX", ceo_title:"我们是谁",
      ceo_p1:"MicroretailX LLC 是本项目背后的法律实体。我们为机构环境开发以自动化为先的系统，用于受控、可扩展的生物技术基础设施。",
      ceo_p2:"我们聚焦下一次工业转型的结构层：机器人、软件编排与可量化执行，作为可部署的空间操作系统。",
      gov_kicker:"政府", gov_title:"机构部署",
      gov_p1:"面向公共部门与机构伙伴的全球可部署框架：试点环境、合规对齐、运营治理与长期韧性。",
      gov_p2:"联系方式建设中",
      top_sound_on_off:{on:"声音开",off:"声音关"}
    },
    ru:{ top_about:"О НАС", top_nodes:"УЗЛЫ", ui_close:"ЗАКРЫТЬ",
      footer_html:`<a href="https://www.microstudioX.com" target="_blank" rel="noopener">MICRORETAILX LLC</a> · MICROSTUDIOX — ПРОЕКТ В РАЗРАБОТКЕ. БЕЗ КОММЕРЧЕСКОЙ ДЕЯТЕЛЬНОСТИ.`,
      about_kicker:"О НАС", about_title:"ГЛОБАЛЬНАЯ МАСШТАБИРУЕМАЯ СИСТЕМА ДЛЯ НОВОЙ ИНДУСТРИАЛЬНОЙ ЭПОХИ.",
      about_p1:"Наша цель — предоставить государствам глобально разворачиваемое и масштабируемое решение на основе продвинутой автоматизации и контролируемой биотехнологической инфраструктуры.",
      about_p2:"Система превращает физическое пространство в полностью автоматизированные операционные среды, соответствующие новому индустриальному сдвигу, где ПО, робототехника и оркестрация данных переопределяют производство.",
      about_p3:"Ставя автоматизацию базовым слоем, мы поддерживаем эффективность, устойчивость и долгосрочный суверенитет в публичных и институциональных внедрениях.",
      ceo_kicker:"microlabsX", ceo_title:"КТО МЫ",
      ceo_p1:"MicroretailX LLC — юридическое лицо, стоящее за этой инициативой. Мы разрабатываем системы «automation-first» для контролируемой и масштабируемой биотехнологической инфраструктуры в институциональных средах.",
      ceo_p2:"Мы фокусируемся на структурном слое следующего индустриального сдвига: робототехника, оркестрация ПО и измеримое исполнение как разворачиваемая операционная система для пространства.",
      gov_kicker:"ГОСУДАРСТВА", gov_title:"ИНСТИТУЦИОНАЛЬНОЕ ВНЕДРЕНИЕ",
      gov_p1:"Глобально разворачиваемый фреймворк для государственного и институционального сектора: пилотные среды, регуляторное соответствие, операционное управление и долгосрочная устойчивость.",
      gov_p2:"контакт в разработке",
      top_sound_on_off:{on:"ЗВУК ВКЛ",off:"ЗВУК ВЫКЛ"}
    }
  };

  function currentDict(){
    const lang = (localStorage.getItem("mrx_lang") || "en");
    return I18N[lang] || I18N.en;
  }

  function applyLanguage(lang){
    if(!SUPPORTED.includes(lang)) lang = "en";
    localStorage.setItem("mrx_lang", lang);

    document.documentElement.setAttribute("dir", lang === "ar" ? "rtl" : "ltr");
    document.documentElement.setAttribute("lang", lang);

    const dict = I18N[lang] || I18N.en;

    document.querySelectorAll("[data-i18n]").forEach(el=>{
      const key = el.getAttribute("data-i18n");
      if(dict[key]) el.textContent = dict[key];
    });

    const footer = document.querySelector("[data-i18n='footer_html']");
    if(footer && dict.footer_html) footer.innerHTML = dict.footer_html;

    // safe: this function exists below and doesn't TDZ-crash
    syncSoundUI();
  }

  // ===== LANG click-to-open (won't close too fast) =====
  const langWrap = document.getElementById("langWrap");
  const langBtn = document.getElementById("langBtn");

  function openLang(){
    langWrap.classList.add("is-open");
    langBtn.setAttribute("aria-expanded","true");
  }
  function closeLang(){
    langWrap.classList.remove("is-open");
    langBtn.setAttribute("aria-expanded","false");
  }
  function toggleLang(e){
    e.stopPropagation();
    langWrap.classList.contains("is-open") ? closeLang() : openLang();
  }

  langBtn.addEventListener("click", toggleLang);
  langBtn.addEventListener("keydown", (e)=>{
    if(e.key === "Enter" || e.key === " "){
      e.preventDefault();
      toggleLang(e);
    }
  });

  langWrap.addEventListener("click", (e)=> e.stopPropagation());
  document.addEventListener("click", closeLang);

  document.querySelectorAll(".lang-chip").forEach(chip=>{
    chip.addEventListener("click", (e)=>{
      e.stopPropagation();
      applyLanguage(chip.getAttribute("data-lang"));
      closeLang();
    });
  });

  // init language
  applyLanguage(localStorage.getItem("mrx_lang") || "en");

  // ===== SOUND (NO TDZ CRASH) =====
  function getSoundRefs(){
    return {
      v: document.getElementById("bg"),
      fab: document.getElementById("soundFab"),
      label: document.getElementById("soundLabel")
    };
  }

  function syncSoundUI(){
    const { v, fab, label } = getSoundRefs();
    if(!v || !fab || !label) return;

    const muted = !!v.muted;
    fab.classList.toggle("is-muted", muted);

    let txt = muted ? "SOUND OFF" : "SOUND ON";
    try{
      const dict = currentDict();
      if(dict && dict.top_sound_on_off){
        txt = dict.top_sound_on_off[muted ? "off" : "on"];
      }
    }catch(_){}

    label.textContent = txt;
  }

  let lastToggleAt = 0;

  async function toggleSound(e){
    if(e){ e.stopPropagation(); e.preventDefault(); }

    const now = performance.now();
    if(now - lastToggleAt < 220) return; // avoid double fire
    lastToggleAt = now;

    const { v, fab } = getSoundRefs();
    if(!v || !fab) return;

    // pulse feedback
    fab.classList.remove("is-pulse");
    void fab.offsetWidth;
    fab.classList.add("is-pulse");
    setTimeout(()=> fab.classList.remove("is-pulse"), 140);

    // toggle
    v.muted = !v.muted;

    // ensure audible playback after user gesture
    if(!v.muted){
      try{
        v.volume = 1;
        await v.play();
      }catch(_){}
    }

    syncSoundUI();
  }

  document.addEventListener("DOMContentLoaded", ()=>{
    const { fab } = getSoundRefs();
    if(!fab) return;

    fab.addEventListener("pointerdown", toggleSound, { passive:false });
    fab.addEventListener("click", toggleSound, { passive:false });
    fab.addEventListener("keydown", (e)=>{
      if(e.key === "Enter" || e.key === " "){
        e.preventDefault();
        toggleSound(e);
      }
    });

    syncSoundUI();
  });

  // ===== Anti-save (best-effort) =====
  document.addEventListener("contextmenu", e => e.preventDefault());
  document.addEventListener("keydown", e => {
    const k = e.key.toLowerCase();
    if ((e.ctrlKey && ["s","u","p","c","x"].includes(k)) || e.key === "F12") {
      e.preventDefault();
      e.stopPropagation();
    }
  });
</script>

</body>
</html>
